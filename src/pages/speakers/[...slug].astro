---
import { CollectionEntry, getCollection } from "astro:content";
import Footer from "../../components/Common/Footer.astro";
import Navbar from "../../components/Common/Navbar.astro";
import PageHead from "../../components/Common/PageHead.astro";
import SpeakersLinks from "../../components/Speakers/SpeakersLinks.astro";
// 1. Generate a new path for every collection entry

interface Props {
  entry: CollectionEntry<"speakers">;
}

export async function getStaticPaths() {
  const speakerEntries = await getCollection("speakers");
  return speakerEntries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

// 2. When it's time to render, you can get the entry directly from the prop
const { entry } = Astro.props;
const { Content } = await entry.render();
---

<!-- Below is your "component template." It's just HTML, but with
     some magic sprinkled in to help you build great templates. -->
<html lang="it" class="scroll-smooth">
  <PageHead />

  <body class="flex flex-col min-h-screen">
    <Navbar />

    <main
      id="swup"
      class="main-content transition-fade flex flex-col max-w-6xl m-auto px-4 pb-12 flex-1"
      data-swup="0"
    >
      <div class="flex flex-col justify-center h-32 mt-32">
        <h1 class="text-6xl mb-10 font-bold">Speakers</h1>
      </div>

      <div class="flex flex-col">
        <div class="flex md:flex-row flex-col items-center mb-10">
          <div class="flex-none w-40 mb-2">
            <img
              src={`/assets/images/speakers/${entry.data.image}`}
              alt={entry.data.name}
              class="rounded-full"
            />
          </div>
          <div class="flex-1 pl-6 flex flex-col md:items-start items-center">
            <h2 class="text-4xl mb-1">{entry.data.name}</h2>
            <p class="text-lg mb-3">{entry.data.tagline}</p>

            {
              entry.data.community != null && (
                <div class="py-1 px-2 rounded-sm bg-green-600 text-white">
                  {entry.data.community}
                </div>
              )
            }
            <div class="py-2"></div>
            <SpeakersLinks
              linkedin={entry.data.linkedin}
              twitter={entry.data.twitter}
              github={entry.data.github}
              websites={entry.data.websites}
              facebook={entry.data.facebook}
              instagram={entry.data.instagram}
            />
          </div>
        </div>
        <Content />
      </div>
    </main>
    <Footer />
  </body>
</html>
